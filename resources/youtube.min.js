"use strict";jQuery(function(){var e="https://customyoutubeprojectapinodejs.herokuapp.com/api/v1/",o=0,i=0,t=!1,s=!1,n=466,a=!1,l={},r={},d={},c={},g={},m={},p=!1,u=!1,h=[],v={videosFromGroup:"yogscast",videoFromProfile:"0",video:"",profile:"0",profileFromGroup:"yogscast",profileSelector:$(),group:"yogscast",category:"gaming"},f=!0,b=!1,w=!1,y=!1,C=!1,k=!1,S=!0,F=!1,P=!1,L="",T="",I="newestFirst";function O(e){$(".profilesDiv").empty();for(let e=0;e<r.members.length;e++){var o=r.members[e].thumbnail;$(".profilesDiv").append(`\n            <article class="profilePics" data-key="${e}">\n                <img src="${o}" alt="" class="profilePic ${e}">\n            </article>\n            `)}a&&e==v.profileFromGroup&&(v.profileSelector=$(`.profilePic.${v.profile}`).addClass("profilePicSelected")),function(){for(let e=0;e<d.members.length;e++)d.members[e].isLive&&$(`.profilePic.${e}`).addClass("isLive")}()}async function D(t){if(C=!0,"live"==v.profile)return;if(l.pages.length<=0)return;(b&&l.pages[0].currentPage!=("newestFirst"==I?1:l.numberOfPages)||k||b&&w||y)&&(w?(T=`?search=${L}&page=1&sorting=${I}`,await $.getJSON(e+"group/"+l.group+"/"+l.id+T,function(e){l=e})):await $.getJSON(e+"group/"+l.group+"/"+l.id+("newestFirst"==I?"/1":"/"+l.numberOfPages),function(e){l=e}),k&&(i="newestFirst"==I||w?0:l.pages[0].videos.length-1,k=!1),y&&(y=!1)),0==t&&(v.profileSelector=$(`.profilePic.${l.id}`).addClass("profilePicSelected"),$(".selectedChannel").html(l.channelName+"("+l.numberOfVideos+" videos)"),$(".selectedChannel").attr("href",`https://www.youtube.com/channel/${l.channelId}/videos`),$("main").empty(),$("body").scrollTop(0),$("main").scrollTop(0),w||(g.members[l.id].hasUpcomingStream&&g.members[l.id].stream.forEach(e=>{var o=new Date(e.dateMS),i=Date.now();$("main").prepend(`\n            <article style="width: 269.55px" class="videoList ${l.id} ${e.videoId}" >\n                <img style="height" src="${e.thumbnail}" alt="" class="thumbnail ${e.videoId}" data-key="${e.videoId};${l.id}" href="https://www.youtube.com/watch?v=${e.videoId}">\n                    <div class="details">\n                        <h4>${e.title.substring(0,15)+"..."}</h4>\n                        <p>Live ${o<i?"":"in "}${function(e,o){var i=Math.abs(e-o)/1e3;const t=Math.floor(i/86400);i-=86400*t;const s=Math.floor(i/3600)%24;i-=3600*s;const n=Math.floor(i/60)%60;return`${t>=1?1===t?t+" day, ":t+" days, ":""}${s>=1?1===s?s+" hour, ":s+" hours, ":""}`+`${n>=1?1===n?n+" minute":n+" minutes":""}`}(o,i)}${o<i?" ago":""}!</p>\n                        <p>Scheduled live for ${e.date}!</p>\n                    </div>\n            </article>\n            `)}),d.members[l.id].isLive&&$("main").prepend(`\n            <article style="width: 269.55px" class="videoList ${l.id} ${d.members[l.id].videoId}" >\n                <img style="height" src="${d.members[l.id].thumbnail}" alt="" class="thumbnail ${d.members[l.id].videoId}" data-key="${d.members[l.id].videoId};${l.id}" href="https://www.youtube.com/watch?v=${d.members[l.id].videoId}">\n                <div class="details">\n                    <h4>${d.members[l.id].title.substring(0,15)+"..."}</h4>\n                    <p>LIVE NOW!</p>\n                </div>\n            </article>\n            `))),("newestFirst"==I||w?i>=59&&(""!=l.pages[0].nextPage||!w||""!=l.queryToken):i<0&&parseInt(l.pages[0].currentPage)-1>=0)&&(w?(T=`?search=${L}&page=${l.pages[0].nextPage}&sorting=${I}&queryToken=${l.queryToken}`,await $.getJSON(e+"group/"+l.group+"/"+l.id+T,function(e){l=e})):await $.getJSON(e+"group/"+l.group+"/"+l.id+"/"+("newestFirst"==I?l.pages[0].nextPage:parseInt(l.pages[0].currentPage)-1),function(e){l=e}),i="newestFirst"==I||w?0:l.pages[0].videos.length-1);let s=0;for(;("newestFirst"==I||w?i<l.pages[0].videos.length:i>=0)&&s<30;){var n=l.pages[0].videos[i].videoID,a=l.pages[0].videos[i].thumbnails.mediumURL,r=l.pages[0].videos[i].title.substring(0,15)+"...",c=l.pages[0].videos[i].datePublished;$("main").append(`\n            <article class="videoList ${l.id} ${n}" >\n                <img src="${a}" alt="" class="thumbnail ${n}" data-key="${n};${l.id}" href="https://www.youtube.com/watch?v=${n}">\n                <div class="details">\n                    <h4>${r}</h4>\n                    <p>${c}</p>\n                </div>\n            </article>\n            `),"newestFirst"==I||w?i++:i--,o++,s++}""==v.video&&(v.video=l.pages[0].videos[0].videoID),V(),$(".searchBar").val().length>=0&&b?($(".selectedChannel").append(`<p class="searchCounter" style="display: inline-block;font-size: 15px">  (Searched: ${o} videos)</p>`),b=!1):$(".searchBar").val().length>=0&&$(".searchCounter").text(` (Searched: ${o} videos)`),$(".selectedChannel").text().length>=59?$(".selectedChannelText").css("font-size","15px"):$(".selectedChannelText").css("font-size","25px"),P=w?i==l.pages[0].videos.length&&""==l.queryToken:o>=l.numberOfVideos,$(window).scrollTop()>=$(".videosContainer").offset().top+$(".videosContainer").outerHeight()-window.innerHeight&&!P?D(o):C=!1}function x(e){"live"==v.group?v.videoFromProfile=e[1]:v.videoFromProfile=v.profile,v.video=e[0],$(`.videoList.${v.videoFromProfile}.${e[0]}`).addClass("videoSelected"),$(`.thumbnail.${e[0]}`).addClass("thumbSelected"),$("#video").html(`\n        <iframe class="embeddedPlayer" width="560" height="315" src="https://www.youtube.com/embed/${e[0]}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>\n        `)}function N(e){for(let o=0;o<c.length;o++)if(c[o].group==e){d=c[o];break}}function B(e){for(let o=0;o<c.length;o++)if(m[o].group==e){g=m[o];break}}function V(){(l.id==v.videoFromProfile||h.includes(v.videoFromProfile))&&`.videoList.${v.videoFromProfile}.${v.video}`.length&&$(`.thumbnail.${v.video}`).length&&($(`.videoList.${v.videoFromProfile}.${v.video}`).hasClass("videoSelected")||$(`.thumbnail.${v.video}`).hasClass("thumbSelected")||($(`.videoList.${v.videoFromProfile}.${v.video}`).addClass("videoSelected"),$(`.thumbnail.${v.video}`).addClass("thumbSelected")))}function J(){$(window).on("scroll",function(){F?$(window).off("scroll"):($(window).scrollTop()>=1&&($(window).off("scroll"),$(".toTop").fadeIn(400),S=!1),o<l.numberOfVideos&&!F&&G())})}function G(){$(window).on("scroll",function(){S&&J(),o>=l.numberOfVideos||P?($(window).off("scroll"),w&&(w=!1),f=!1):$(window).scrollTop()>=$(".videosContainer").offset().top+$(".videosContainer").outerHeight()-window.innerHeight&&o<l.numberOfVideos&&!C&&!P&&D(o)})}function H(){t=!t,$(".embeddedPlayer").fadeToggle(400),t?($(".mainVideo").height(15),n-=300,$(".mainSelector").css("padding-top",n)):($(".mainVideo").height(315),n+=300,$(".mainSelector").css("padding-top",n))}function U(){(s=!s)?(n-=98,$(".mainSelector").css("padding-top",n),$(".profileContainer").height(0)):(n+=98,$(".profileContainer").height(98),$(".mainSelector").css("padding-top",n))}!async function(){try{await $.getJSON(e+"group/yogscast",function(e){r=e}),await $.getJSON(e+"group/yogscast/0/1",function(e){l=e}),await $.getJSON(e+"all/liveInfo",function(e){$(".logos").append('\n                <img src="resources/logo/gamingLogo.png" alt="" class="logo gaming main" data-key="main">\n                <img src="resources/logo/vtubersLogo.png" alt="" class="logo vtubers main" data-key="main">\n                <img src="resources/logo/yogLogo.png" alt="" class="logo yogscast gaming group" data-key="yogscast">\n                <img src="resources/logo/gamedevsLogo.png" alt="" class="logo gamedevs gaming group" data-key="gamedevs">\n                <img src="resources/logo/hololiveLogo.png" alt="" class="logo hololive vtubers group" data-key="hololive">\n                <img src="resources/logo/774Logo3.png" alt="" class="logo 774inc vtubers group" data-key="774inc">\n                <img src="resources/logo/vomsLogo2.png" alt="" class="logo voms vtubers group" data-key="voms">\n                <img src="resources/logo/liveLogo.png" alt="" class="logo live" data-key="live">\n                '),$(".logo.gaming.main").hide(),$(".logo.vtubers.group").hide(),$(".logo.live").toggle(),c=e;for(let o=0;o<e.length;o++)for(let i=0;i<e[o].members.length;i++)if(e[o].members[i].isLive){p||(p=!0),$(`.logo.${e[o].group}`).addClass("hasLive");break}}),await $.getJSON(e+"all/UpcomingStreams",function(e){m=e;for(let o=0;o<e.length;o++)for(let i=0;i<e[o].members.length;i++)if(e[o].members[i].hasUpcomingStream){u||(u=!0);break}}),N("yogscast"),B("yogscast")}catch(e){return void console.log(e)}p&&$(".logo.live").toggle();v.video=l.pages[0].videos[0].videoID,O("yogscast"),D(o),V(),x([l.pages[0].videos[0].videoID,";0"]),G(),a=!0}(),$(".logos").on("click",".logo",async function(){var o=$(this).attr("data-key");if(v.group==o)"live"!=o&&U();else if("live"==o){if(v.profile==o)return;s||U(),$(window).off("scroll"),f=!1,$(".profilesDiv").empty(),v.group=o,v.videosFromGroup=o,$("body").scrollTop(0),$("main").scrollTop(0),$("main").empty(),$(".selectedChannel.selectedChannelText").empty(),$(".selectedChannel").hasClass("selectedChannelHover")&&$(".selectedChannel").removeClass("selectedChannelHover"),$(".selectedChannel").attr("href",""),v.profile="live",v.profileFromGroup="",h=[];for(let e=0;e<c.length;e++)for(let o=0;o<c[e].members.length;o++)c[e].members[o].isLive&&(h.push(c[e].members[o].id),$("main").append(`\n                        <article style="width: 269.55px" class="videoList ${c[e].members[o].id} ${c[e].members[o].videoId}" >\n                            <img style="height" src="${c[e].members[o].thumbnail}" alt="" class="thumbnail ${c[e].members[o].videoId}" data-key="${c[e].members[o].videoId};${c[e].members[o].id}" href="https://www.youtube.com/watch?v=${c[e].members[o].videoId}">\n                            <div class="details">\n                                <h4>${c[e].members[o].title.substring(0,15)+"..."}</h4>\n                                <p>By: ${c[e].members[o].channelName}</p>\n                                <p>LIVE NOW!</p>\n                            </div>\n                        </article>\n                        `));p&&$(".selectedChannel.selectedChannelText").text(`Number of Channels Live: ${h.length}!`),V()}else"main"==o?"gaming"==v.category?($(".logo.vtubers.main").toggle(),$(".logo.gaming.main").fadeToggle("slow"),$(".logo.gaming.group").toggle(),$(".logo.vtubers.group").toggle("easing"),v.category="vtubers"):($(".logo.gaming.main").toggle(),$(".logo.vtubers.main").fadeToggle("slow"),$(".logo.vtubers.group").toggle(),$(".logo.gaming.group").toggle("easing"),v.category="gaming"):(await $.getJSON(e+"group/"+o,function(e){r=e}),N(o),B(o),s&&U(),v.group=o,O(v.group),$(".profilesDiv").scrollTop(0),$(".profilesDiv").toggle(),$(".profilesDiv").fadeToggle(650))}),$(".profilesDiv").on("click",".profilePics",async function(){$(".toTop").fadeOut(400),S||(S=!0,J());var t=$(this).attr("data-key");o=0,L="",w=!1,P=!1,i=0,t==v.profile&&v.profileFromGroup==v.group||("oldestFirst"==I&&($(".sortByDropDown").val("newestFirst"),I=$(".sortByDropDown").val()),await $.getJSON(e+"group/"+v.group+"/"+t+"/1",function(e){l=e}),v.profileSelector.removeClass("profilePicSelected"),$(".selectedChannel").hasClass("selectedChannelHover")||$(".selectedChannel").addClass("selectedChannelHover"),$(".selectedChannel").is(":visible")&&$(".selectedChannel").toggle(),$(".selectedChannel").html(l.channelName+" ["+l.numberOfVideos+" videos]"),$(".selectedChannel").attr("href",`https://www.youtube.com/channel/${l.channelId}/videos`),$(".selectedChannel").fadeToggle(700),v.videosFromGroup=l.group,v.profile=t,v.profileFromGroup=l.group,f||(f=!0,G()),D(o),V())}),$("main").on("mousedown",".thumbnail",function(e){switch(e.button){case 0:var o=$(this).attr("data-key").split(";");if(o[0]==v.video)return;(v.videoFromProfile==v.profile||"live"==v.group&&h.includes(v.videoFromProfile))&&$(`.videoList.${v.videoFromProfile}.${v.video}`).length&&$(`.thumbnail.${v.video}`).length&&($(`.videoList.${v.videoFromProfile}.${v.video}`).removeClass("videoSelected"),$(`.thumbnail.${v.video}`).removeClass("thumbSelected")),t&&H(),x(o);break;case 1:var i=$(this).attr("href");window.open(i,"_blank");break;case 2:e.preventDefault()}}),$(".sortByDropDown").on("change",function(){$(".toTop").fadeOut(400),S||(S=!0,J()),f||(f=!0,G()),I=$(".sortByDropDown").val(),P=!1,L="",w=!1,k=!0,D(o=0)}),$(".searchBar").on("keyup",async function(e){if("Enter"==e.code){if("live"==v.profile)return;if(encodeURIComponent($(".searchBar").val().toLowerCase())==L)return;""!=$(".searchBar").val().toLowerCase()?(w=!0,b=!0):(w=!1,b=!1,y=!0),L=encodeURIComponent($(".searchBar").val().toLowerCase()),o=0,i=0,P=!1,"oldestFirst"==I&&(k=!0),$(".toTop").fadeOut(400),S||(S=!0,J()),f||(f=!0,G()),D(o)}}),$(".toTop").on("click",function(){$(".toTop").is(":animated")||($(".toTop").fadeOut(400),S=!0,F=!0,$("html").animate({scrollTop:0},1e3,function(){F=!1,J()}))}),$(".selectedChannel").on("click",function(){var e=$(this).attr("href");""!=e&&window.open(e,"_blank")}),$(".mainVideo").on("click",H)});